// ==UserScript==
// @name         推特原图获取
// @namespace    https://github.com/hmaoraze
// @version      1.0.0
// @description  在 X（原“推特”）界面右击图片，选择在新标签页打开图片，即可获取原始图片。
// @author       hmaoraze
// @match        https://*.twimg.com/*
// @grant        none
// @icon         data:image/png;base64,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
// ==/UserScript==

(function() {
    'use strict';

    // 仅直接访问图片时执行
    if (document.contentType && document.contentType.startsWith('image/')) {
        const url = new URL(window.location.href);
        const params = url.searchParams;

        // name 参数不是 orig，则替换为 orig 并重载
        if (params.has('name') && params.get('name') !== 'orig') {
            params.set('name', 'orig');
            // 使用 location.replace 避免产生历史记录，同时刷新页面
            window.location.replace(url.toString());
        }
    }
})();